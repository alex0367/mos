[Global]
CurrentProject=mos.vpj
[ActiveConfig]
mos.vpj=Release
[TreeExpansion2]
-@ mos.vpj
  - Source Files
  - Header Files
  + Resource Files
  + Bitmaps
  - Other Files
scroll:20
[State]
SCREEN: 1440 900 98 84 1217 787 0 0 M 0 0 0 0 1006 571 0
CWD: ../mos
BUFFER: BN="ps/ps.c"
BI: MA=1 74 1  TABS=1 5  WWS=1 IWT=0 ST=8 IN=2 BW=0 US=32000 RO=0 SE=1 SN=0 BIN=0 MN=C/C++	HM=0 MF=120652384 TL=0 MLL=0 ASE=0 LNL=4 LCF=6 CAPS=0 E=0 ESBU2=1 CL="" SC="" SCE= SCU=
VIEW: LN=.122 CL=19 LE=0 CX=20 CY=6 WI=5 BI=25 HT=0 HN=0 HF=0 HC=4
BUFFER: BN="lib/list.h"
BI: MA=1 74 1  TABS=1 5  WWS=1 IWT=0 ST=8 IN=2 BW=0 US=32000 RO=0 SE=1 SN=0 BIN=0 MN=C/C++	HM=0 MF=117440608 TL=0 MLL=0 ASE=0 LNL=4 LCF=6 CAPS=0 E=0 ESBU2=1 CL="" SC="" SCE= SCU=
VIEW: LN=.247 CL=16 LE=0 CX=17 CY=14 WI=5 BI=27 HT=0 HN=0 HF=0 HC=4
WINDOW: 1 24 1004 546 0 0 N  WF=0 WT=2 ",,," DID=0
BUFFER: BN="lib/list.h"
VIEW: LN=.247 CL=16 LE=0 CX=22 CY=14 WI=161 BI=27 HT=0 HN=0 HF=0 HC=4
WINDOW: 1 24 1004 546 0 0 N  WF=0 WT=20 ",,," DID=0
BUFFER: BN="ps/ps.c"
VIEW: LN=.2032 CL=36 LE=0 CX=42 CY=21 WI=213 BI=25 HT=0 HN=0 HF=0 HC=4
MDISTATE: 1
AAAAAAAAAAHaAAAAAAAAACQAAAVqAAADP+oAAAAC+gAAAAIAAAACAAAAAQAAAAD6AAAAAgAAAAIAAAAAAAAAAfwAAABYADIAOgA6ADoALwBVAHMAZQByAHMALwB6AGgAZQBuAGcAZQBuAGQAZQByAC8AUAByAG8AagBlAGMAdAAvAG0AbwBzAC8AbABpAGIALwBsAGkAcwB0AC4AaAAA/////wAA/AAAAFQAMgAwADoAOgA6AC8AVQBzAGUAcgBzAC8AegBoAGUAbgBnAGUAbgBkAGUAcgAvAFAAcgBvAGoAZQBjAHQALwBtAG8AcwAvAHAAcwAvAHAAcwAuAGMBAP////8AAQ==
FILEHIST: 9
user/ps0.c
fs/pipechar.c
fs/mount.c
fs/pipechar.h
fs/namespace.c
Makefile
ps/ps.h
lib/list.h
ps/ps.c
TBCLASS: 0 0
DEBUG: 4 0 5 0 3 0 gdb
1heap_quota0
1heap_quota_high0
1wait_list.Flink0
1&wait_list0
01task_sched(func)00<PENDING>0
00task_schedps/ps.c32000xc02042490
00test_nsfs/namespace.c44600
00mainffstool/ffstool.c13810
00read_partition_tabledrivers/hdd.c44510
printf
strcpy
std::*
SESSION: gdb REMOTE: /Users/zhengender/Project/mos/kernel
DEBUG: 0 0 1 0 3 0 gdb
00read_partition_tabledrivers/hdd.c42910
printf
strcpy
std::*
SESSION: gdb REMOTE: /Users/zhengender/Project/mos/kernel.dbg
DEBUG: 3 0 1 0 3 0 gdb
1(unsigned)c0
1argv[0]0
1copy_page0
00pf_processmm/pagefault.c2210xc020eaab0
printf
strcpy
std::*
SESSION: gdb REMOTE: /Users/zhengender/Project/mos/user/run
DEBUG: 0 0 0 0 3 0 gdb
printf
strcpy
std::*
SESSION: gdb REMOTE: /Users/zhengender/Project/mos/user/ls.dbg
DEBUG: 0 0 2 0 3 0 gdb
00elf_mapps/elf.c481<PENDING>0
00elf_mapps/elf.c1481<PENDING>0
printf
strcpy
std::*
SESSION: gdb REMOTE: /Users/zhengender/Project/mos/user/sh.dbg
DEBUG: 0 0 0 0 3 0 gdb
printf
strcpy
std::*
SESSION: gdb REMOTE: /Users/zhengender/Project/mos/user/lib/ld-linux.so.2
DEBUG: 0 0 2 0 3 0 gdb
00sys_readdirfs/namespace.c4521<PENDING>0
00sys_lstat64syscall/syscall.c84810
printf
strcpy
std::*
DEBUG2: 4
00task_schedps/ps.c32000xc0204249055
{
unsignedint*per_ps=0;
unsignedint*new_ps=0;
LIST_ENTRY*entry=0;
inti=0;
unsignedintcr3;

__asm__("movl%%cr3,%0":"=q"(cr3));
per_ps=(unsignedint*)(cr3+KERNEL_OFFSET);
task->user.page_dir=vm_alloc(1);
new_ps=(unsignedint*)task->user.page_dir;
00test_nsfs/namespace.c4460055
entry->d_namlen=strlen(entry->d_name);
entry->d_ino=1;
entry->d_reclen=((entry->d_namlen+10)/4+1)*4;

}

returnret;
}

voidfs_closedir(DIRdir)
{
00mainffstool/ffstool.c1381055
case'r':
test_read();
report_cache();
break;
case'\n':
break;
default:
printf("unknowcommand%c\n",c);
break;
}
}
00read_partition_tabledrivers/hdd.c4451055
{
printk("%s:ignoring%hdiskforsafety\n",d->name,capacity*BLOCK_SECTOR_SIZE);
d->is_ata=0;
return;
}

block=block_register(d,d->name,hdd_read,hdd_write,hdd_close,BLOCK_RAW,capacity);
parse_partition(block);
}

staticvoidparse_partition(block*block)
SESSION2: gdb REMOTE: /Users/zhengender/Project/mos/kernel
DEBUG2: 1
00read_partition_tabledrivers/hdd.c4291055
strcpy(extra_info,"model\"");
strcat(extra_info,model);
strcat(extra_info,"\",serial\"");
strcat(extra_info,serial);
strcat(extra_info,"\"");
#ifdefDEBUG
printk("%s:capacity%h,model%s,serial%s\n",d->name,capacity*BLOCK_SECTOR_SIZE,model,serial);
printk("%s:extra_info%s\n",d->name,extra_info);
#endif

/*DisableaccesstoIDEdisksover1GB,whicharelikely
SESSION2: gdb REMOTE: /Users/zhengender/Project/mos/kernel.dbg
DEBUG2: 1
00pf_processmm/pagefault.c2210xc020eaab055
unsignedcr3;
task_struct*cur=CURRENT_TASK();
__asm__("movl%cr2,%eax");
__asm__("movl%%eax,%0":"=m"(cr2));
__asm__("movl%%cr3,%0":"=q"(cr3));
printk("pagefault!errorcode%x,address%x,eip%x\n",frame->error_code,cr2,frame->eip);
printk("cur->user.page_dir%x,cr3%x\n",cur->user.page_dir,cr3);

for(;;)
{
__asm__("hlt");
SESSION2: gdb REMOTE: /Users/zhengender/Project/mos/user/run
DEBUG2: 0
SESSION2: gdb REMOTE: /Users/zhengender/Project/mos/user/ls.dbg
DEBUG2: 2
00elf_mapps/elf.c481<PENDING>055
for(i=0;i<num;i++){
unsignedhead_offset=table_offset+i*size;
Elf32_Phdrphdr;
fs_read(fd,head_offset,&phdr,sizeof(phdr));
if(phdr.p_type==PT_INTERP){
returnelf_read_interp(fd,&phdr,path);
}else{
continue;
}

}
00elf_mapps/elf.c1481<PENDING>045
staticunsignedelf_map_programs_at(unsignedfd,unsignedtable_offset,unsignedsize,unsignednum,unsignedbias)
{
unsignedoffset=0;
inti=0;
for(i=0;i<num;i++){
unsignedhead_offset=table_offset+i*size;
Elf32_Phdrphdr;
fs_read(fd,head_offset,&phdr,sizeof(phdr));
if(/*phdr.p_type==PT_DYNAMIC||*/
phdr.p_type==PT_LOAD){
SESSION2: gdb REMOTE: /Users/zhengender/Project/mos/user/sh.dbg
DEBUG2: 0
SESSION2: gdb REMOTE: /Users/zhengender/Project/mos/user/lib/ld-linux.so.2
DEBUG2: 2
00sys_readdirfs/namespace.c4521<PENDING>055
returnret;
}

voidfs_closedir(DIRdir)
{
if(!dir){
return;
}

vfs_close_dir(dir);
}
00sys_lstat64syscall/syscall.c8481045
task_struct*cur=CURRENT_TASK();
structstats32;

if(fd>MAX_FD)return-1;
#ifdef__VERBOS_SYSCALL__
klog("fstat64(%d,%x)size%dblocks%dblksize%d\n",
fd,s,s32.st_size,s32.st_blocks,s32.st_blksize);
#endif

fs_fstat(fd,&s32);
[ProjectDates]
mos.vpj=20140713032932000
